!function(a){var i,n,t=new Array;function e(e){e.preventDefault(),n=!1,i=a(this).closest(".crown-framework-media-input"),targetCrownMediaInputName=a("input[type=hidden]",i).attr("name"),i.parents(".ui-dialog").length&&(a(".ui-widget-overlay, .ui-dialog").hide(),n=!0),t[targetCrownMediaInputName]||(t[targetCrownMediaInputName]=wp.media.frames.crownMediaFrames[targetCrownMediaInputName]=wp.media({title:"Select File",button:{text:"Continue"},library:{type:i.data("media-mime-type")},multiple:!1}),t[targetCrownMediaInputName].on("select",function(e){t[targetCrownMediaInputName].state().get("selection").map(function(e){!function(e,i){e.addClass("has-media"),a("input[type=hidden]",e).val(i.id);var t=i.icon;if("image"==i.type)if(i.hasOwnProperty("sizes"))t=i.sizes.medium?i.sizes.medium.url:i.sizes.full.url;else if(i.hasOwnProperty("url"))t=i.url;else t="";a(".media-input-preview",e).html('<img src="'+t+'" />'),a("span.media-input-name",e).html(String(i.url.match(/\/[^\/]+$/)).substr(1)),n&&(a(".ui-widget-overlay, .ui-dialog").show(),a(".ui-dialog > .ui-dialog-content").dialog("option","position",{my:"center",at:"center",of:window}))}(i,e.toJSON())})})),t[targetCrownMediaInputName].open()}function o(e){e.preventDefault();var i=a(this).closest(".crown-framework-media-input");i.removeClass("has-media"),a("input[type=hidden]",i).val(""),a("span.media-input-preview, span.media-input-name",i).html(""),n&&a(".ui-dialog > .ui-dialog-content").dialog("option","position",{my:"center",at:"center",of:window})}a(document).ready(function(){a(document).on("click",".crown-framework-media-input a.media-input-button",e),a(document).on("click",".crown-framework-media-input a.media-input-remove",o),wp.media.frames.crownMediaFrames=new Array})}(jQuery);